let cartIcon=document.querySelector("#cart-icon"),cart=document.querySelector(".cart"),closeCart=document.querySelector("#close-cart");cartIcon.onclick=()=>{cart.classList.add("active")},closeCart.onclick=()=>{cart.classList.remove("active")},"loading"==document.readyState?document.addEventListener("DOMContentLoaded",ready):ready();function ready(){for(var a,b=document.getElementsByClassName("cart-remove"),c=0;c<b.length;c++)a=b[c],a.addEventListener("click",removeCartItem);for(var d,e=document.getElementsByClassName("cart-quantity"),c=0;c<e.length;c++)d=e[c],d.addEventListener("change",quantityChanged);for(var a,f=document.getElementsByClassName("add-cart"),c=0;c<f.length;c++)a=f[c],a.addEventListener("click",addCartClicked);loadCartItems()}function removeCartItem(a){var b=a.target;b.parentElement.remove(),updatetotal(),saveCartItems(),updateCartIcon()}function quantityChanged(a){var b=a.target;(isNaN(b.value)||0>=b.value)&&(b.value=1),updatetotal(),saveCartItems(),updateCartIcon()}function addCartClicked(a){var b=a.target,c=b.parentElement,d=c.getElementsByClassName("product-title")[0].innerText,e=c.getElementsByClassName("price")[0].innerText,f=c.getElementsByClassName("product-img")[0].src;addProductToCart(d,e,f),updatetotal(),saveCartItems(),updateCartIcon()}function addProductToCart(a,b,c){var d=document.createElement("div");d.classList.add("cart-box");for(var e=document.getElementsByClassName("cart-content")[0],f=e.getElementsByClassName("cart-product-title"),g=0;g<f.length;g++)if(f[g].innerText==a)return void alert("J\xE1 adicionaste este item ao carrinho");d.innerHTML=`
    <img src="${c}" alt="" class="cart-img">
                        <div class="detail-box">
                            <div class="cart-product-title">${a}</div>
                            <div class="cart-price">${b}</div>
                            <input type="number" name="" id="" value="1" class="cart-quantity">
                        </div>

                        <i class='bx bx-trash-alt cart-remove'></i>`,e.append(d),d.getElementsByClassName("cart-remove")[0].addEventListener("click",removeCartItem),d.getElementsByClassName("cart-quantity")[0].addEventListener("change",quantityChanged),saveCartItems(),updateCartIcon()}function updatetotal(){for(var a=document.getElementsByClassName("cart-content")[0],b=a.getElementsByClassName("cart-box"),c=0,d=0;d<b.length;d++){var e=b[d],f=e.getElementsByClassName("cart-price")[0],g=e.getElementsByClassName("cart-quantity")[0],h=parseFloat(f.innerText.replace("\u20AC","")),j=g.value;c+=h*j}c=Math.round(100*c)/100,document.getElementsByClassName("total-price")[0].innerText="\u20AC"+c,localStorage.setItem("cartTotal",c)}function saveCartItems(){for(var a=document.getElementsByClassName("cart-content")[0],b=a.getElementsByClassName("cart-box"),c=[],d=0;d<b.length;d++){cartBox=b[d];var e=cartBox.getElementsByClassName("cart-product-title")[0],f=cart.getElementsByClassName("cart-price")[0],g=cartBox.getElementsByClassName("cart-quantity")[0],h=cartBox.getElementsByClassName("cart-img")[0].src,j={title:e.innerText,price:f.innerText,quantity:g.value,productImg:h};c.push(j)}localStorage.setItem("cartItems",JSON.stringify(c))}function loadCartItems(){var a=localStorage.getItem("cartItems");if(a){a=JSON.parse(a);for(var b,c=0;c<a.length;c++){b=a[c],addProductToCart(b.title,b.price,b.productImg);var d=document.getElementsByClassName("cart-box"),e=d[d.length-1],f=e.getElementsByClassName("cart-quantity")[0];f.value=b.quantity}}var g=localStorage.getItem("cartTotal");g&&(document.getElementsByClassName("total-price")[0].innerText="\u20AC"+g),updateCartIcon()}function updateCartIcon(){for(var a=document.getElementsByClassName("cart-box"),b=0,c=0;c<a.length;c++){var d=a[c],e=d.getElementsByClassName("cart-quantity")[0];b+=parseInt(e.value)}var f=document.querySelector("#cart-icon");f.setAttribute("data-quantity",b)}function clearCart(){var a=document.getElementsByClassName("cart-content")[0];a.innerHTML="",updatetotal(),localStorage.removeItem("cartItems")}